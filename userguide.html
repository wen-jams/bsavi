<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="API Reference" href="reference.html" /><link rel="prev" title="Cosmology &amp; CLASS" href="class_examples.html" />

    <!-- Generated with Sphinx 7.1.2 and Furo 2023.09.10 -->
        <title>User Guide - BSAVI 0.4.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">BSAVI 0.4.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">BSAVI 0.4.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="class_examples.html">Cosmology &amp; CLASS</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">API Reference</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="user-guide">
<h1>User Guide<a class="headerlink" href="#user-guide" title="Permalink to this heading">#</a></h1>
<p>This guide will demonstrate and explain the features and functionality
of BSAVI by creating a visualization that will dynamically generate sine
waves from frequency, phase, and amplitude data. It will follow the structure
of the <a class="reference internal" href="class_examples.html"><span class="doc">Cosmology &amp; CLASS</span></a> tutorials without requiring install of CLASS
or any cosmologist-specific packages. A basic knowledge of plotting with
<a class="reference external" href="https://holoviews.org/index.html">HoloViews</a> is suggested, since it
is the utility that provides the interactive plots for this package.</p>
<p>Works in a Jupyter Notebook or as a standalone Python script.
To see the full interactivity, download the “userguide” notebook
<a class="reference external" href="https://github.com/wen-jams/bsavi/tree/main/tutorials">here</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># imports</span>
<span class="kn">import</span> <span class="nn">bsavi</span> <span class="k">as</span> <span class="nn">bsv</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>
</div>
<p>Suppose we want to visualize how changes in amplitude, frequency, and
phase affect some wave functions. Let’s choose the sine and sinc
functions.</p>
<p>A sine wave can be defined as:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[y(x) = A \sin{(2\pi f x + \phi)} = A \sin{(\omega x + \phi)}\]</div>
</div>
<p>where <span class="math notranslate nohighlight">\(A\)</span> is the amplitude, <span class="math notranslate nohighlight">\(f\)</span> is the frequency,
<span class="math notranslate nohighlight">\(\omega\)</span> is the angular frequency, and <span class="math notranslate nohighlight">\(\phi\)</span> is the phase.</p>
<p>The sinc function is simply:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\mathrm{sinc}~(x) = \frac{\sin{(x)}}{x}\]</div>
</div>
<p>First let’s generate some random data in three dimensions. These will be
samples of our amplitudes, frequencies and phases.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ndim</span><span class="p">,</span> <span class="n">nsamples</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1000</span>

<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="n">data1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">ndim</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">nsamples</span> <span class="o">//</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span>
    <span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">nsamples</span> <span class="o">//</span> <span class="mi">5</span><span class="p">,</span> <span class="n">ndim</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">data2</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">ndim</span><span class="p">)[</span><span class="kc">None</span><span class="p">,</span> <span class="p">:]</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span>
    <span class="n">ndim</span> <span class="o">*</span> <span class="n">nsamples</span> <span class="o">//</span> <span class="mi">5</span>
<span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">([</span><span class="n">nsamples</span> <span class="o">//</span> <span class="mi">5</span><span class="p">,</span> <span class="n">ndim</span><span class="p">])</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">data1</span><span class="p">,</span> <span class="n">data2</span><span class="p">])</span>
</pre></div>
</div>
<p>Then convert it into a pandas DataFrame (BSAVI only accepts DataFrames,
for now) and define column labels with some fancy <span class="math notranslate nohighlight">\(\LaTeX\)</span>
formatting:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">param_names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;phase&#39;</span><span class="p">,</span> <span class="s1">&#39;amplitude&#39;</span><span class="p">]</span>
<span class="n">latex</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;\omega / 2\pi&#39;</span><span class="p">,</span> <span class="s1">&#39;\phi&#39;</span><span class="p">,</span> <span class="s1">&#39;\mathrm</span><span class="si">{amplitude}</span><span class="s1">&#39;</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">param_names</span><span class="p">)</span>
<span class="n">latex_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">param_names</span><span class="p">,</span> <span class="n">latex</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>frequency</th>
      <th>phase</th>
      <th>amplitude</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.496714</td>
      <td>-0.138264</td>
      <td>0.647689</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.523030</td>
      <td>-0.234153</td>
      <td>-0.234137</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1.579213</td>
      <td>0.767435</td>
      <td>-0.469474</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.542560</td>
      <td>-0.463418</td>
      <td>-0.465730</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.241962</td>
      <td>-1.913280</td>
      <td>-1.724918</td>
    </tr>
  </tbody>
</table>
</div><p>We now have a table of samples which we can visualize directly with
<code class="docutils literal notranslate"><span class="pre">bsv.viz</span></code>. Bringing along the latex dict we made earlier:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bsv</span><span class="o">.</span><span class="n">viz</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">latex_dict</span><span class="o">=</span><span class="n">latex_dict</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/bsavi-userguide1.gif" src="_images/bsavi-userguide1.gif" />
<section id="writing-functions-for-observables">
<h2>Writing Functions for Observables<a class="headerlink" href="#writing-functions-for-observables" title="Permalink to this heading">#</a></h2>
<p>Next, we will define the function that takes a given row of samples from
the table above and uses it to compute the two waveforms.</p>
<section id="data-formats">
<h3>Data Formats<a class="headerlink" href="#data-formats" title="Permalink to this heading">#</a></h3>
<p>Any function that computes data for an Observable must return data in
the following format:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="o">...</span><span class="p">]),</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="o">...</span><span class="p">])},</span>
    <span class="p">{</span><span class="s1">&#39;z&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">z1</span><span class="p">,</span> <span class="n">z2</span><span class="p">,</span> <span class="o">...</span><span class="p">]),</span> <span class="s1">&#39;w&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">w1</span><span class="p">,</span> <span class="n">w2</span><span class="p">,</span> <span class="o">...</span><span class="p">])},</span>
    <span class="o">...</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Examining this format more closely: we have a list of dictionaries that
contain two 1-D NumPy arrays, with their parameter names as the keys.
BSAVI will interpret each dict as its own observable and attempt to plot
it with the first array on the x axis and the second array on the y
axis. The keys will be used to label their respective axes.</p>
<p>This rather specific format is related to how HoloViews interfaces with
tabular datasets. <a class="reference external" href="https://holoviews.org/user_guide/Tabular_Datasets.html">Their
documentation</a>
gives a full list of accepted data formats. While BSAVI currently only
supports the one detailed above, eventually all the pure Python, Numpy,
and Pandas data storage formats will be supported.</p>
<p>Another note: Observables and functions are one-to-one, so if you’d
rather have separate functions that all only return one set of data
points, but still want to visualize them together, you will have to
create an Observable for each. You are allowed to pass any amount of
arguments into each function though.</p>
<p>Most importantly, the function must have logic to select a sample from
an input dataset according to its index. This is because BSAVI will pass
the index corresponding to a point selected on the plot into your
function. Therefore, <code class="docutils literal notranslate"><span class="pre">index</span></code> is required as the first argument. Then
you can have an arbitrary amount of arguments. The example below is how
it should be done if the input dataset is a DataFrame.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">compute_waveforms</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">input_data</span><span class="p">):</span>
    <span class="n">selection</span> <span class="o">=</span> <span class="n">input_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="n">index</span><span class="p">]]</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">4</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
    <span class="n">angular_freq</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">selection</span><span class="p">[</span><span class="s1">&#39;frequency&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">phase</span> <span class="o">=</span> <span class="n">selection</span><span class="p">[</span><span class="s1">&#39;phase&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">amp</span> <span class="o">=</span> <span class="n">selection</span><span class="p">[</span><span class="s1">&#39;amplitude&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">sin</span> <span class="o">=</span> <span class="n">amp</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angular_freq</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">phase</span><span class="p">)</span>
    <span class="n">sinc</span> <span class="o">=</span> <span class="n">amp</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sinc</span><span class="p">(</span><span class="n">angular_freq</span><span class="o">*</span><span class="n">x</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">+</span> <span class="n">phase</span><span class="p">)</span>
    <span class="n">waves</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s1">&#39;sin(x)&#39;</span><span class="p">:</span> <span class="n">sin</span><span class="p">},</span>
        <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s1">&#39;sinc(x)&#39;</span><span class="p">:</span> <span class="n">sinc</span><span class="p">},</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">waves</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># example run</span>
<span class="n">sin</span><span class="p">,</span> <span class="n">sinc</span> <span class="o">=</span> <span class="n">compute_waveforms</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
<span class="c1"># plot them using holoviews</span>
<span class="kn">import</span> <span class="nn">holoviews</span> <span class="k">as</span> <span class="nn">hv</span>
<span class="n">layout</span> <span class="o">=</span> <span class="n">hv</span><span class="o">.</span><span class="n">Curve</span><span class="p">(</span><span class="n">sin</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;sin(x)&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">hv</span><span class="o">.</span><span class="n">Curve</span><span class="p">(</span><span class="n">sinc</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;sinc(x)&#39;</span><span class="p">)</span>
<span class="n">layout</span>
</pre></div>
</div>
<img alt="_images/bsavi-userguide2.png" src="_images/bsavi-userguide2.png" />
</section>
</section>
<section id="creating-an-observable">
<h2>Creating an Observable<a class="headerlink" href="#creating-an-observable" title="Permalink to this heading">#</a></h2>
<p>Now we are ready to set up the Observable. This is a way to
associate your data with how it should be plotted, including title and
axis labels, LaTeX formatting, and other customizations. BSAVI
will use all this information when generating the visualizations. There
are two types, Observable and LiveObservable, which deal with static data
and dynamic calculations, respectively. Below is the full list of options
for both BSAVI Observable types:</p>
<p><a class="reference internal" href="reference.html#bsavi.Observable" title="bsavi.Observable"><code class="xref py py-class docutils literal notranslate"><span class="pre">bsavi.Observable</span></code></a>: the standard Observable, which takes tabular data
to make plots.</p>
<ul class="simple">
<li><dl class="simple">
<dt>name: string or list of strings</dt><dd><ul>
<li><p>specifies the display name of the observable for things like plot titles</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>data: dict-like or list of dict-likes</dt><dd><ul>
<li><dl class="simple">
<dt>the data to associated with that observable. can be python dict (or pandas DataFrame)</dt><dd><p>whose keys (or column names) will be used for things like plot axis labels.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>plot_type: string</dt><dd><ul>
<li><p>specifies how the data should be visualized. currently can pick ‘Curve’, ‘Bars’, or ‘Scatter’</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>plot_opts: holoviews Options object</dt><dd><ul>
<li><p>customization options for the observable plot. see Holoviews documentation</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>latex_labels: dict</dt><dd><ul>
<li><p>dictionary of plain text parameter names as keys and latex versions as values for the data table</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p><a class="reference internal" href="reference.html#bsavi.LiveObservable" title="bsavi.LiveObservable"><code class="xref py py-class docutils literal notranslate"><span class="pre">bsavi.LiveObservable</span></code></a>: an Observable that takes a function and uses it
to calculate data for making plots. Has the same options as <a class="reference internal" href="reference.html#bsavi.Observable" title="bsavi.Observable"><code class="xref py py-class docutils literal notranslate"><span class="pre">bsavi.Observable</span></code></a>,
but <code class="docutils literal notranslate"><span class="pre">data</span></code> is replaced with:</p>
<ul class="simple">
<li><dl class="simple">
<dt>myfunc: callable</dt><dd><ul>
<li><p>a user-provided function that returns data. can return more than one set of data.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>myfunc_args: tuple</dt><dd><ul>
<li><p>arguments for user-provided function</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Note: BSAVI is limited to 2-D graphs (two plot axes), so there are three
<em>plot_types</em> available:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'Curve'</span></code>: A continuous line drawn through each point</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Scatter'</span></code>: A simple scatterplot of each point</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Bars'</span></code>: A series of bars with their heights determined by the
y-axis value at each point</p></li>
</ul>
<section id="customizations">
<h3>Customizations<a class="headerlink" href="#customizations" title="Permalink to this heading">#</a></h3>
<p>To apply customizations to your plots, use HoloViews Options
(documentation
<a class="reference external" href="https://holoviews.org/user_guide/Applying_Customizations.html">here</a>).
They allow you to set axis limits, add logarithmic scaling to each axis,
and change the color cycles used for each plot element.</p>
<p>A brief summary of the most common options you might need:</p>
<ul class="simple">
<li><p><em>xlim, ylim</em>: tuple of the lower and upper axis range limits, to be
used instead of auto axis scaling. Use <code class="docutils literal notranslate"><span class="pre">None</span></code> to denote no explicit
upper/lower limit.</p>
<ul>
<li><p>For example: ylim=(None, 10) would cut the figure off for anything
above 10, but the lower y value will be adjusted to fit the figure
into the frame.</p></li>
</ul>
</li>
<li><p><em>logx, logy</em>: boolean values to set logarithmic scaling on either
axis. Default is False.</p></li>
<li><p><em>height, width</em>: integer values to set the size of the plot frame.
BSAVI sets <code class="docutils literal notranslate"><span class="pre">height=400,</span> <span class="pre">width=500</span></code> by default.</p></li>
<li><p><em>color</em>: sets the color of the plotted objects. This can be:</p>
<ul>
<li><p>a single color, e.g. <code class="docutils literal notranslate"><span class="pre">'red'</span></code> or</p></li>
<li><p>a
<a class="reference external" href="https://holoviews.org/user_guide/Style_Mapping.html#cycles-and-palettes">cycle/palette</a>,
which applies a colormap to an overlay and replaces the default
colormap.</p></li>
</ul>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># setting up some customizations first</span>
<span class="kn">import</span> <span class="nn">holoviews</span> <span class="k">as</span> <span class="nn">hv</span>
<span class="kn">from</span> <span class="nn">holoviews</span> <span class="kn">import</span> <span class="n">opts</span>
<span class="n">opts1</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">Curve</span><span class="p">(</span><span class="n">xlim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">4</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="n">hv</span><span class="o">.</span><span class="n">Cycle</span><span class="p">(</span><span class="s1">&#39;YlOrRd&#39;</span><span class="p">),</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s1">&#39;#151515&#39;</span><span class="p">)</span>
<span class="n">opts2</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">xlim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">4</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="n">hv</span><span class="o">.</span><span class="n">Cycle</span><span class="p">(</span><span class="s1">&#39;PuBuGn&#39;</span><span class="p">),</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s1">&#39;#151515&#39;</span><span class="p">)</span>

<span class="n">waves_latex</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span>
    <span class="s1">&#39;sin(x)&#39;</span><span class="p">:</span> <span class="s1">&#39;\sin</span><span class="si">{x}</span><span class="s1">&#39;</span><span class="p">,</span>
    <span class="s1">&#39;sinc(x)&#39;</span><span class="p">:</span> <span class="s1">&#39;1/\sin</span><span class="si">{x}</span><span class="s1">&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="pre-computed-observables">
<h3>Pre-Computed Observables<a class="headerlink" href="#pre-computed-observables" title="Permalink to this heading">#</a></h3>
<p>The function we wrote earlier, <code class="docutils literal notranslate"><span class="pre">compute_waveforms</span></code>, is pretty fast.
But sometimes, we might have calculations that take several minutes or
longer to complete. Clicking on a point in the sample plot and waiting
minutes for a graph of your Observable to appear is not very fun. If we
compute our observable for every sample beforehand, it will make for a
more seamless interactive experience.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># go through the entire set of samples, computing waveforms for each set:</span>
<span class="n">waves_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)):</span>
    <span class="n">wave</span> <span class="o">=</span> <span class="n">compute_waveforms</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
    <span class="n">waves_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wave</span><span class="p">)</span>

<span class="n">waves_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">waves_list</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;sin(x)&#39;</span><span class="p">,</span> <span class="s1">&#39;sinc(x)&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Now we can create an <code class="docutils literal notranslate"><span class="pre">Observable</span></code>, giving it the wave data and specifying
plot titles, plot types, customizations, and latex labels.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">waveforms</span> <span class="o">=</span> <span class="n">bsv</span><span class="o">.</span><span class="n">Observable</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;sin(x)&#39;</span><span class="p">,</span> <span class="s1">&#39;sinc(x)&#39;</span><span class="p">],</span>
    <span class="n">data</span><span class="o">=</span><span class="n">computed_df</span><span class="p">,</span>
    <span class="n">plot_type</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Curve&#39;</span><span class="p">,</span> <span class="s1">&#39;Scatter&#39;</span><span class="p">],</span>
    <span class="n">plot_opts</span><span class="o">=</span><span class="p">[</span><span class="n">opts1</span><span class="p">,</span> <span class="n">opts2</span><span class="p">],</span>
    <span class="n">latex_labels</span><span class="o">=</span><span class="n">waves_latex</span>
<span class="p">)</span>
</pre></div>
</div>
<p>We can check that it works with</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">waveforms</span><span class="o">.</span><span class="n">draw_plot</span><span class="p">([</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="dynamically-computed-observables">
<h3>Dynamically Computed Observables<a class="headerlink" href="#dynamically-computed-observables" title="Permalink to this heading">#</a></h3>
<p>On the other hand, our function is fast enough that we can just have
BSAVI call it every time we select a sample. In this case, we will use
<code class="docutils literal notranslate"><span class="pre">LiveObservable</span></code> and give it our function, along with a tuple containing its
arguments. We can skip the first argument, <code class="docutils literal notranslate"><span class="pre">index</span></code>, since it’s
automatically handled by the visualizer.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dynamic_waveforms</span> <span class="o">=</span> <span class="n">bsv</span><span class="o">.</span><span class="n">LiveObservable</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;sin(x)&#39;</span><span class="p">,</span> <span class="s1">&#39;sinc(x)&#39;</span><span class="p">],</span>
    <span class="n">myfunc</span><span class="o">=</span><span class="n">compute_waveforms</span><span class="p">,</span>
    <span class="n">myfunc_args</span><span class="o">=</span><span class="p">(</span><span class="n">df</span><span class="p">,),</span>
    <span class="n">plot_type</span><span class="o">=</span><span class="s1">&#39;Curve&#39;</span><span class="p">,</span>
    <span class="n">plot_opts</span><span class="o">=</span><span class="p">[</span><span class="n">opts1</span><span class="p">,</span> <span class="n">opts2</span><span class="p">],</span>
    <span class="n">latex_labels</span><span class="o">=</span><span class="n">waves_latex</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Again, check that it plots correctly with</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dynamic_waveforms</span><span class="o">.</span><span class="n">draw_plot</span><span class="p">([</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</section>
</section>
<section id="visualizing">
<h2>Visualizing<a class="headerlink" href="#visualizing" title="Permalink to this heading">#</a></h2>
<p>Finally, we will use <code class="docutils literal notranslate"><span class="pre">viz</span></code> to interactively visualize the whole thing.
Here’s an overview of the function arguments: - <strong>data</strong>: (Pandas
DataFrame) the data you want shown as a scatter plot - <strong>observables</strong>:
(list) a list of observables you’d like to visualize -
<strong>show_observables</strong>: (Boolean) whether you want to see the observable
plots or not (default = False if no observables, True if observables is
not None). - <strong>latex_dict</strong>: (dict) a dictionary containing the Latex
formatting for your axis labels (default = None)</p>
<p>Run the cell below to test out the interactivity by selecting points on
the scatterplot in the left section, and see what appears on the plots
in the right section!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bsv</span><span class="o">.</span><span class="n">viz</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">observables</span><span class="o">=</span><span class="p">[</span><span class="n">waveforms</span><span class="p">],</span> <span class="n">latex_dict</span><span class="o">=</span><span class="n">latex_dict</span><span class="p">)</span><span class="o">.</span><span class="n">servable</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/bsavi-userguide3.gif" src="_images/bsavi-userguide3.gif" />
<p>If running in a Jupyter Notebook, you should see a dashboard displayed inline.
If you’d rather see it in a separate browser window, run the cell below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">server</span> <span class="o">=</span> <span class="n">bsv</span><span class="o">.</span><span class="n">viz</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">observables</span><span class="o">=</span><span class="p">[</span><span class="n">waveforms</span><span class="p">],</span> <span class="n">latex_dict</span><span class="o">=</span><span class="n">latex_dict</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>Once you are done with it, stop the server with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">server</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</pre></div>
</div>
<p>Another option is to write all your code in a standalone script. Make sure you use
<code class="docutils literal notranslate"><span class="pre">bsv.viz</span></code> with the <code class="docutils literal notranslate"><span class="pre">.servable()</span></code> method, and that it is the last line of code in
your script. Then serve it with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>panel<span class="w"> </span>serve<span class="w"> </span>path/to/my_app.py
</pre></div>
</div>
<p>Then click on the localhost link to view the dashboard in a separate browser tab.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="reference.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">API Reference</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="class_examples.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Cosmology &amp; CLASS</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, James Wen
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">User Guide</a><ul>
<li><a class="reference internal" href="#writing-functions-for-observables">Writing Functions for Observables</a><ul>
<li><a class="reference internal" href="#data-formats">Data Formats</a></li>
</ul>
</li>
<li><a class="reference internal" href="#creating-an-observable">Creating an Observable</a><ul>
<li><a class="reference internal" href="#customizations">Customizations</a></li>
<li><a class="reference internal" href="#pre-computed-observables">Pre-Computed Observables</a></li>
<li><a class="reference internal" href="#dynamically-computed-observables">Dynamically Computed Observables</a></li>
</ul>
</li>
<li><a class="reference internal" href="#visualizing">Visualizing</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=4e78f113"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="_static/scripts/furo.js?v=32e29ea5"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>